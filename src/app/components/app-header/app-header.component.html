<header class="sticky top-0 z-50 w-full bg-surface-light dark:bg-surface-dark border-b border-[#e2e8e4] dark:border-[#2a3e30]">
  <div class="max-w-[1440px] mx-auto px-4 md:px-8 py-3 flex items-center justify-between gap-6">
    <!-- Logo -->
    <div class="flex items-center gap-3 shrink-0">
      <div class="bg-primary/10 p-1.5 rounded-lg">
        <span class="material-symbols-outlined text-primary text-2xl">inventory_2</span>
      </div>
      <h1 class="text-base font-extrabold tracking-tight dark:text-white cursor-pointer" routerLink="/">KitchenManager</h1>
    </div>

    <!-- Centro: Busca e Navegação -->
    <div class="flex-1 flex items-center justify-center gap-8">
      <!-- Search Bar -->
      <div class="relative w-full max-w-sm group hidden lg:block">
        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
          <span class="material-symbols-outlined text-gray-400 text-[18px] group-focus-within:text-primary transition-colors">search</span>
        </div>
        <input
          class="block w-full pl-9 pr-3 py-1.5 bg-gray-50 dark:bg-[#102216] border border-gray-200 dark:border-[#2a3e30] rounded-lg text-xs font-medium placeholder-gray-500 focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all outline-none"
          placeholder="Buscar em todo o sistema..."
          type="text"
        />
        <div class="absolute inset-y-0 right-0 pr-2 flex items-center pointer-events-none">
          <kbd class="hidden sm:inline-block px-1.5 py-0.5 text-[10px] font-mono font-bold text-gray-400 bg-white dark:bg-surface-dark border border-gray-200 dark:border-gray-700 rounded">⌘K</kbd>
        </div>
      </div>

      <!-- Navigation Menu -->
      <nav class="hidden md:flex items-center gap-6 shrink-0">
        <a
          class="text-sm font-semibold transition-colors dark:text-gray-400"
          [class.text-gray-500]="currentRoute !== '/'"
          [class.text-primary]="currentRoute === '/'"
          [class.hover:text-primary]="currentRoute !== '/'"
          routerLink="/"
        >
          Dashboard
        </a>
        <a
          class="text-sm font-semibold transition-colors dark:text-gray-400"
          [class.text-gray-500]="!currentRoute.includes('/stock')"
          [class.text-primary]="currentRoute.includes('/stock')"
          [class.hover:text-primary]="!currentRoute.includes('/stock')"
          routerLink="/stock"
        >
          Estoque
        </a>
        <a
          class="text-sm font-semibold transition-colors dark:text-gray-400"
          [class.text-gray-500]="!currentRoute.includes('/nfce')"
          [class.text-primary]="currentRoute.includes('/nfce')"
          [class.hover:text-primary]="!currentRoute.includes('/nfce')"
          routerLink="/nfce-history"
        >
          NFC-e
        </a>

        <!-- Configurações Dropdown -->
        <div class="relative py-1">
          <button
            class="flex items-center gap-1 text-sm font-bold transition-colors"
            [class.text-gray-500]="!isConfigRoute"
            [class.text-primary]="isConfigRoute"
            (click)="toggleConfigMenu()"
          >
            Configurações
            <span class="material-symbols-outlined text-[18px]" [class.rotate-180]="showConfigMenu">expand_more</span>
            <span *ngIf="isConfigRoute" class="absolute bottom-0 left-0 w-full h-0.5 bg-primary rounded-full"></span>
          </button>

          <!-- Dropdown Menu -->
          <div
            *ngIf="showConfigMenu"
            class="absolute top-[calc(100%+4px)] left-0 w-64 bg-surface-light dark:bg-surface-dark border border-gray-200 dark:border-[#2a3e30] rounded-xl shadow-2xl overflow-hidden z-[60] py-1.5 ring-1 ring-black/5"
          >
            <a
              class="flex items-center gap-3 px-4 py-2.5 text-[11px] font-bold uppercase tracking-wider transition-all"
              [ngClass]="{
                'text-primary bg-primary/5 dark:bg-primary/10': currentRoute === '/categories',
                'text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-primary/5 hover:text-primary': currentRoute !== '/categories'
              }"
              routerLink="/categories"
              (click)="closeConfigMenu()"
            >
              <span class="material-symbols-outlined text-[18px]">category</span>
              Categorias de Produtos
            </a>
            <a
              class="flex items-center gap-3 px-4 py-2.5 text-[11px] font-bold uppercase tracking-wider transition-all"
              [ngClass]="{
                'text-primary bg-primary/5 dark:bg-primary/10': currentRoute === '/storage-locations',
                'text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-primary/5 hover:text-primary': currentRoute !== '/storage-locations'
              }"
              routerLink="/storage-locations"
              (click)="closeConfigMenu()"
            >
              <span class="material-symbols-outlined text-[18px]">shelves</span>
              Locais de Armazenamento
            </a>
            <a
              class="flex items-center gap-3 px-4 py-2.5 text-[11px] font-bold uppercase tracking-wider transition-all"
              [ngClass]="{
                'text-primary bg-primary/5 dark:bg-primary/10': currentRoute === '/units',
                'text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-primary/5 hover:text-primary': currentRoute !== '/units'
              }"
              routerLink="/units"
              (click)="closeConfigMenu()"
            >
              <span class="material-symbols-outlined text-[18px]">straighten</span>
              Unidades Físicas
            </a>
            <div class="border-t border-gray-100 dark:border-[#2a3e30] my-1"></div>
            <a
              class="flex items-center gap-3 px-4 py-2.5 text-[11px] font-bold text-gray-400 dark:text-gray-500 hover:bg-gray-50 dark:hover:bg-primary/5 hover:text-primary transition-all uppercase tracking-wider"
              href="#"
              (click)="closeConfigMenu()"
            >
              <span class="material-symbols-outlined text-[18px]">settings</span>
              Preferências do Sistema
            </a>
          </div>
        </div>
      </nav>
    </div>

    <!-- Direita: Ações e Perfil -->
    <div class="flex items-center gap-2 shrink-0">
      <!-- Toggle Theme -->
      <button
        class="p-2 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-all group"
        title="Alternar Tema"
        (click)="toggleTheme()"
      >
        <span class="material-symbols-outlined block dark:hidden">dark_mode</span>
        <span class="material-symbols-outlined hidden dark:block text-primary">light_mode</span>
      </button>

      <!-- Notificações -->
      <button class="relative p-2 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-all">
        <span class="material-symbols-outlined">notifications</span>
        <span class="absolute top-2 right-2 h-2 w-2 rounded-full bg-red-500 border-2 border-surface-light dark:border-surface-dark"></span>
      </button>

      <!-- User Profile -->
      <div class="flex items-center gap-3 pl-4 border-l border-gray-200 dark:border-gray-700 ml-2">
        <div class="text-right hidden sm:block">
          <p class="text-xs font-bold dark:text-white">Chef João</p>
          <p class="text-[10px] text-gray-500 uppercase font-medium">Administrador</p>
        </div>
        <div
          class="size-9 rounded-full border-2 border-primary/20 bg-cover bg-center shadow-sm cursor-pointer"
          style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuDndNw5EEICMVaWt_JVEIBUonZ543lC21qepLkU52JYd6PvRTj3ptp4rVoI3stJqiazwmyd7YfgwPiC6pWwgca-PAF2tLfgtjuK1p5EgQ_UiK9J2el7NglYrWt2sOzqwupRzZcfTv0IJ3J5o4JEplh9cQZfBHntMmZrduVxdv-VBHOjMoMPdjG9gEuJPGMStZCtc5-ZXh2gY6hTJYZ78ujEyoNRk7-y0NXVDfhTJ4y7N5WGcyju1DTt2jQbK2bEWvyGm2VDArGMJZk');"
        ></div>
      </div>

      <!-- Mobile Menu Button -->
      <button class="md:hidden p-2 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-all">
        <span class="material-symbols-outlined">menu</span>
      </button>
    </div>
  </div>
</header>
