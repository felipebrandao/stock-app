<div *ngIf="isOpen"
     class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-[2px] transition-all duration-300"
     (click)="onClose()">

  <div class="bg-white dark:bg-[#1a2e22] w-full max-w-[480px] rounded-xl shadow-2xl flex flex-col overflow-hidden border border-gray-200 dark:border-gray-800 animate-[scale-in_0.2s_ease-out]"
       (click)="$event.stopPropagation()">

    <div class="px-6 py-4 flex justify-end">
      <button (click)="onClose()"
              class="text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800">
        <span class="material-symbols-outlined !text-[24px]">close</span>
      </button>
    </div>

    <div class="px-8 pb-10 flex flex-col items-center text-center">
      <div class="mb-6 flex items-center justify-center w-24 h-24 rounded-full {{ iconBgColor }}">
        <span class="material-symbols-outlined {{ iconColor }} !text-[80px]"
              [style.font-variation-settings]="'\'FILL\' 1, \'wght\' 400, \'GRAD\' 0, \'opsz\' 48'">
          {{ icon }}
        </span>
      </div>

      <h2 class="text-[#111813] dark:text-white text-2xl font-bold tracking-tight mb-3">
        {{ title }}
      </h2>

      <p class="text-[#61896f] dark:text-gray-400 text-base font-normal leading-relaxed max-w-[340px]">
        <ng-container *ngIf="type === 'error'">
          Não foi possível salvar o item
          <span class="text-[#111813] dark:text-white font-semibold">"{{ result?.itemName }}"</span>.
          Por favor, verifique sua conexão ou tente novamente mais tarde.
        </ng-container>
        <ng-container *ngIf="type === 'success-with-link'">
          O item
          <span class="text-[#111813] dark:text-white font-semibold">"{{ result?.itemName }}"</span>
          foi adicionado ao seu catálogo e vinculado à importação atual.
        </ng-container>
        <ng-container *ngIf="type === 'success'">
          O item
          <span class="text-[#111813] dark:text-white font-semibold">"{{ result?.itemName }}"</span>
          foi adicionado ao seu catálogo com sucesso.
        </ng-container>
      </p>
    </div>

    <div class="px-8 py-6 bg-gray-50/50 dark:bg-black/20 border-t border-gray-100 dark:border-gray-800 flex justify-center">
      <div class="flex flex-col sm:flex-row gap-3 justify-center w-full"
           [class.sm:flex-row-reverse]="type === 'error'">

        <button (click)="onPrimaryAction()"
                class="w-full sm:w-auto px-10 py-3 rounded-lg font-bold text-base transition-all flex items-center justify-center gap-2"
                [ngClass]="{
                  'bg-primary text-white hover:brightness-110 shadow-sm shadow-primary/20': type !== 'error',
                  'bg-gray-800 dark:bg-gray-700 text-white hover:bg-gray-900 dark:hover:bg-gray-600': type === 'error'
                }">
          <span class="truncate">{{ primaryButtonText }}</span>
          <span *ngIf="type === 'success-with-link'" class="material-symbols-outlined !text-[20px]">
            arrow_forward
          </span>
        </button>

        <button *ngIf="showSecondaryButton"
                (click)="onSecondaryAction()"
                class="w-full sm:w-auto px-10 py-3 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 text-[#111813] dark:text-white font-bold text-base hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
          <span class="truncate">Fechar</span>
        </button>
      </div>
    </div>
  </div>
</div>
